# Изменения в проекте

## Разделение на Backend и Frontend

Проект был реорганизован в архитектуру с разделением на backend и frontend.

### Структура

```
ETH_Spread/
├── backend/           # Python FastAPI сервер
│   ├── src/          # Исходный код backend
│   ├── main.py       # Точка входа
│   ├── config.py     # Конфигурация
│   └── requirements.txt
│
├── frontend/         # React приложение
│   ├── src/
│   │   ├── components/  # React компоненты
│   │   ├── pages/       # Страницы
│   │   ├── services/    # API сервисы
│   │   └── types/       # TypeScript типы
│   ├── public/
│   └── package.json
│
└── start_dev.sh      # Скрипт для запуска в dev режиме
```

### Backend изменения

1. **Новый endpoint `/api/all-instruments`**
   - Возвращает данные по всем трем активам (ETH, BTC, SOL) одновременно
   - Каждый актив представлен топовым фьючерсом по ROC

2. **Метод `_get_top_futures_for_instrument()`**
   - Получает топовые фьючерсы для конкретного актива
   - Рассчитывает все необходимые метрики (спред, FR, ROC)

3. **Обновленный WebSocket `/ws/instruments`**
   - Отправляет данные по всем трем активам в real-time
   - Обновление каждые 2 секунды

### Frontend (новый)

1. **Технологии**
   - React 19 + TypeScript
   - Material-UI (MUI) для UI компонентов
   - React Router для навигации
   - Axios для HTTP запросов
   - WebSocket для real-time обновлений

2. **Страницы**
   - **Dashboard** (`/`) - главная страница с таблицей активов
     - Отображает ETH, BTC, SOL
     - Real-time обновления через WebSocket
     - Цветовая индикация прибыльности
   
   - **Settings** (`/settings`) - настройки мониторинга
     - Изменение всех параметров конфигурации
     - Сохранение на backend

3. **Компоненты**
   - **MainLayout** - основной layout с боковой панелью меню
   - Адаптивный дизайн (mobile-friendly)
   - Темная тема

4. **Сервисы**
   - **api.ts** - HTTP клиент для работы с backend API
   - **WebSocketService** - управление WebSocket соединением

### Таблица активов

Таблица на главной странице отображает:

| Колонка | Описание |
|---------|----------|
| Актив | Название актива (ETH, BTC, SOL) |
| Бессрочный | Цена бессрочного фьючерса |
| Срочный | Цена срочного фьючерса |
| Спред % | Спред в процентах (с цветовой индикацией) |
| Funding Rate | Текущий FR |
| Avg FR | Средний FR за 30 дней |
| Дней до эксп. | Дни до экспирации фьючерса |
| Прибыль % | Чистая прибыль в % |
| ROC годовых | Доходность на капитал в % годовых (с цветовой индикацией) |

### Запуск

#### Быстрый запуск (разработка)
```bash
./start_dev.sh
```

#### Ручной запуск

**Backend:**
```bash
cd backend
python main.py
```

**Frontend:**
```bash
cd frontend
npm start
```

### Конфигурация

**Backend** - файл `.env` в папке `backend/`
**Frontend** - файл `.env` в папке `frontend/` (для продакшена)

В режиме разработки frontend использует прокси, настроенный в `package.json`.

### Совместимость

- Старые endpoints backend сохранены для обратной совместимости
- Можно использовать как новый frontend, так и старый HTML интерфейс




